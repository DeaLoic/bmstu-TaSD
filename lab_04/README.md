# Отчет по ЛР-4

### Вариант 22.

#### Хетагуров Павел Иу7-35Б

### 1. Описание условия задачи

**Цель:** реализовать операции работы со стеком, который
представлен в виде массива (статического или динамического) и в виде
односвязного списка, оценить преимущества и недостатки каждой реализации,
получить представление о механизмах выделения и освобождения памяти при
работе с динамическими структурами данных.


**Общее условие задачи:** Создать программу работы со стеком, выполняющую операции добавления, удаления элементов и вывод текущего состояния стека.
Реализовать стек:
а) массивом;
б) списком.
Все стандартные операции со стеком должны быть оформлены подпрограммами. При реализации стека списком в вывод текущего состояния стека добавить просмотр адресов элементов стека и создать свой список или массив свободных областей (адресов освобождаемых элементов) с выводом его на экран.

**Вариантное условие задачи:** Элементами стека являются адреса памяти. При реализации массивами - их вводить, при реализации списком – брать адрес выделенной памяти под элемент 
#### ТЗ и внешняя спецификация

**Исходные данные и результаты (типы, форматы, способ передачи, ограничения):**
**Исходные данные**:

1. Пункт меню. Адрес в шестнадцатиричном формате
**Способ передачи**: Ввод в консоль (стандартный поток ввода)

**Ограничения**:
  1. При вводе адреса должен быть введен хотя бы один символ, даже некорректный

**Выходные данные:**

В зависимости от выбранных пунктов.
1) Пункты `print array stack` и `print list stack`
выводят в консоль элементы стека и соответствующие им адреса в две колонки, начиная с верхнего элемента
2) Пункты `peek from array stack` и `peek from list stack` выводят в консоль последний добавленный элемент
3) Пункт `testing` запускает тесты и выводит их результаты

**Способ обращения к программе**: Запуск app.exe, ввод с клавиатуры

**Описание возможных аварийных ситуаций и ошибок пользователя:**

1. Некорректный ввод.
2. Невозможность выделения памяти.
3. Невозможность добавления элемента (переполненный стек)
4. Невозможность распечатать стек/элемент (пустой стек)

### 2.Описание внутренних структур данных

**Описание полей**
[node_t](img/node.png)
* .data - адрес узла
* .next_node - адрес следующего узла
Данная структура выбранна, так как является базовой для стека.

[stack_t](img/stack.png)
* .head  - Адрес головы стека. (Под головой понимается элемент, к которому есть доступ)
* .size - Кол-во узлов. (Кол-во элементов позволяет легче обрабатывать стек. хотя в общем случае можно ориентироваться на нулевой указатель)

[free_zone_t](img/free_zone.png)
* .addresses - Массив свободных адресов.
* .max_size - Кол-во элементов, помещающееся в выделенную область
* cur_size - Текущее заполнение массива
Структура выбрана, так как позволяет хранить и обрабатывать адреса свободных ячеек памяти, что необходимо по заданию

[stack_array_t](img/stack_array.png)
* .n - Аналогично size в stack_t
* .data - Массив данных типа int64_t (хранятся адреса)

#### 4. Оценка алгоритма.

По памяти на массиве
1) O(1) для статического массива
2) O(n) для динамического

По памяти на списке - O(n). Так же требуется дополнительная память под ссылку на предыдущий элемент

По времени на массиве
1) O(1) для статического, так как физически память не освобождается
2) O(n) - время на выделение/переноса памяти большим куском.

По времени на списке
1) O(n) - время на освобождение/выделение памяти для каждого узла

### 3.Функциональные тесты
|  Исходные данные |  Выходные |  Описание теста |
| --- | --- | --- |
| Адрес некоректного формата | INCORRECT INPUT |  Проверка ввода |
| Печать пустого стека | Stack is empty | Печать пустого стека |
| Добавление в заполненный стек | stack is overflow | Переполнение стека |
| Удаление из пустого стека | Stack is empty | Пустой стек |

### 4. Вывод и сравнение
Тесты скорости
Linux (Debian)
[testing_time_linux](img/testing_time_linux.png)
Windows 8.1
[testing_time_windows8.1](img/testing_time_windows8.1.png)
Windows 10
[testing_time_windows10](img/testing_time_windows10.png)

На малых размерах стека разница в скорости работы стека на массиве и списке невелика

Тесты дефрагментации
Linux (Debian)
[testing_defrag_linux](img/testing_defrag_linux.png)
Windows 8.1
[testing_defrag_windows8.1](img/testing_defrag_windows8.1.png)
Windows 10
[testing_defrag_windows10](img/testing_defrag_windows10.png)

Дефрагментации на разных системах отличается