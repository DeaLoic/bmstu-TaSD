# Отчет по ЛР-1

### Вариант 22.

#### Хетагуров Павел Иу7-35Б

### 1. Описание условия задачи

**Цель:** Реализация арифметических операций над числами, выходящими за разрядную сетку персонального компьютера, выбор необходимых типов данных для хранения и обработки указанных чисел.

**Условие задачи:** Смоделировать операцию умножения действительного числа в форме ±m.n Е±K, где суммарная длина мантиссы (m+n) - до 30 значащих цифр, а величина порядка K - до 5 цифр, на целое число длиной до 30 десятичных цифр. Результат выдать в форме ±0.m1 Е±K1, где m1 - до 30 значащих цифр, а K1 - до 5 цифр.

Программа должна осуществлять ввод чисел и выдавать либо верный результат в указанном формате (при корректных данных), либо сообщение о невозможности произвести счет.

#### ТЗ и внешняя спецификация

**Исходные данные и результаты (типы, форматы, точность, способ передачи, ограничения):**

**Исходные данные**:
2. Целое десятичное число в формате: ±m
3. Вещественное десятичное число в формате: ±m.n e|Е ±K

**Способ передачи**: Ввод в консоль с клавиатуры (стандартный поток ввода).

**Ограничения**:

1. Числа вводятся без пробелов, иначе считывается часть, идущаяя до пробела
2. Знак + можно опускать. Ведущие нули можно опускать. Незначащие нули в дробной части можно опускать.
3. Единственный ноль в записи порядка опускать нельзя
4. Суммарная длина мантиссы <= 30, длина порядка <= 5, без учета знаков
5. Можно вводить как 'E' как в верхнем, так и в нижнем регистре (латинский алфавит)
6. Длина целого числа <= 30 без учета знака
7. Дублирующиеся знаки – ошибка.

Разделитель – строго точка (не запятая)

**Выходные данные:**

Вещественное число в формате: ±0.m1 Е ±K1

Точность: До 30-ти значащих цифр;

* **Способ передачи**: Вывод в консоль (стандартный поток вывода).

**Ограничения**:

* Суммарная длина мантиссы (m1) <= 30, длина порядка (K1) <= 5

**Способ обращения к программе**: Вызов консольного приложения app.exe, ввод с клавиатуры.

**Описание возможных аварийных ситуаций и ошибок пользователя:**

1. Некорректный ввод.
2. Превышение по модулю величины порядка в процессе вычисления.

### 2.Описание внутренних структур данных

!(./images/Screenshot_1.png)

**Обоснование выбора**

Данная структура выбрана, так как позволяет хранить все данные, нужные для обработки вместе.
Эта же структура используется как для хранения целого (порядок = 0), так и для хранения вещественного числа

**Описание полей**

* .mantisaSign - Целое число. Знак мантисы (1 для положительного, 0 для отрицательного)
* .dotPos - Целое число. Номер цифры, перед которой была введена точка. (-1, если точка не была введена)
* .mantisaLen - Целое число, длинна мантисы
* .mantisa - Целочисленный массив.
* .exp - Целое число. Экспонента

### 3.Функциональные тесты

|  Исходное целое |  Исходное вещественное |  Выходные |  Описание теста |
| --- | --- | --- | --- |
|  ++1 | 1e1 | Wrong input |  Проверка ввода двойного знака |
| 1e1 | 1e1 | Wrong input |  Проверка ввода буквы в целочисленное |
| 1 | 1 | Wrong input |  Проверка ввода целого в вещественное |
| 1 |  +1E999999 | Wrong input |  Некорректная мантиса |
|  +1 |  .1.e+1 | Wrong input |  Проверка ввода некоретного формата вещественного |
| 123 | -10e-1 | -0.123E+3 |  Корректные данные |
| 0000 |  +9999...999(30)E-99999 |  +0.0E+0 |  Умножение нуля на граничное значение |
| -1111(30) | -1111(30)E10 |  +0.123456790123456790123456790123E+69 |  Переполнение в процессе выполнения (округление, потеря точности) |
|  +0000000(29)1 |  +.000(29)1e+0 |  +0.0E+1 |  Во входных незначащие нули |
| 1 | 1E99999 | Exponent too large |  Переполнение порядка в большую сторону |
| 1 | 0.1e-99999 | Exponent too large |  Переполнение порядка в большую сторону |
| 999(30) | 2e0 | 0.2E31 |  Переполнение мантисы в процессе выполнения |
| 999(30) | 999(30)E0 | 0.1E61 |  Граничные значения |

### 4.Контрольные вопросы

**1) Каков возможный диапазон чисел, представляемых в ПК?**

-2^R ... (2^R - 1), Где R - разрядность шины

**2) Какова возможная точность представления чисел, чем она определяется?**

Вопрос точности актуален только для вещественных чисел.

Согласно стандарту IEEE под тип float отводится 32 бита, из которых

* 1 бит на знак
* 8 бит на экспоненту
* 23 бита на мантису

Под тип double - 64 бита, из которых

* 1 бит на знак
* 11 бит на экспоненту
* 52 бита на мантису

Таким образом максимальная точность на 64 битных машинах - 52 бита

**3) Какие стандартные операции возможны над числами?**

Сложение и побитовый сдвиг

**4) Какой тип данных может выбрать программист, если обрабатываемые числа<br> превышают возможный диапазон представления чисел в ПК?**

Массив целых чисел

**5) Как можно осуществить операции над числами, выходящими за рамки машинного представления?**

Симулируя сложение/вычитание/умножение/деление в столбик над целочисленным массивом.

### Вывод

Для работы с числами, выходящими за разрядную сетку машины можно использовать структуру, содержащую

1. Целочисленное поле, содержащее знак числа (признак положительности 1/0)
2. Целочисленный массив, с поразрядно записанной мантисой
3. Целочисленное поле, содержащее экспоненту

Такая структура данных будет полностью симулировать представление числа в машине.<br>

Операции над числами в данном представлении будут происходить поразрядно, симулируя операции "в столбик".
